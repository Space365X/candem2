(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["spending-content-block"],{"7d74":function(e,t,n){},a77b:function(e,t,n){"use strict";n.r(t);var a=n("7a23"),r=Object(a["withScopeId"])("data-v-c24a558a");Object(a["pushScopeId"])("data-v-c24a558a");var c={class:"widget-wrapper",id:"spending-wrapper"},o={key:1,id:"spending-widget","test-id":"ae-spending-widget"},i={"test-id":"ae-spending-widget_date-range-label",class:"mrg-y(0)"},s={key:2,id:"spending-widget-empty-state","test-id":"ae-spending-widget-empty-state"},d={class:"empty-state-message"};Object(a["popScopeId"])();var u=r((function(e,t,n,r,u,l){var p=Object(a["resolveComponent"])("q2-loading"),g=Object(a["resolveComponent"])("q2-chart-donut"),m=Object(a["resolveComponent"])("SvgWrapper");return Object(a["openBlock"])(),Object(a["createBlock"])("div",c,[e.isFetching?(Object(a["openBlock"])(),Object(a["createBlock"])(p,{key:0,class:"absolute-center"})):e.isPfmEnrolled?(Object(a["openBlock"])(),Object(a["createBlock"])("div",o,[Object(a["createVNode"])("h3",i,Object(a["toDisplayString"])(e.monthToDateLabel),1),Object(a["createVNode"])(g,{"summary-name":e.loc("_t.account.spendingWidget.chart.summaryName"),"summary-icon":"barchart-trend","hover-scale-size":"5","selected-offset":e.spendingWidgetData.length>1?15:0,"inner-radius":e.donutInnerRadiusPct,"outer-radius":e.donutOuterRadiusPct,"is-clickable":"",format:"currency",data:e.chartData,class:"donut-chart",onClick:e.openMxWidget},null,8,["summary-name","selected-offset","inner-radius","outer-radius","data","onClick"]),Object(a["createVNode"])("a",{role:"button","test-id":"ae-spending-widget-all-spending-btn",href:"javascript://",onClick:t[1]||(t[1]=function(){return e.openMxWidget&&e.openMxWidget.apply(e,arguments)})},Object(a["toDisplayString"])(e.loc("_t.account.spendingWidget.chart.link.allSpending")),1)])):(Object(a["openBlock"])(),Object(a["createBlock"])("div",s,[Object(a["createVNode"])(m,{name:e.emptyStateImgSrc},null,8,["name"]),Object(a["createVNode"])("div",d,Object(a["toDisplayString"])(e.emptyStateMessage),1),Object(a["createVNode"])("a",{class:"call-to-action","test-id":"ae-spending-widget-empty-state-cta",onClick:t[2]||(t[2]=function(){return e.enrollInPFM&&e.enrollInPFM.apply(e,arguments)}),href:"javascript://"},Object(a["toDisplayString"])(e.enrollmentCTA),1)]))])})),l=(n("d81d"),n("b0c0"),n("b680"),n("96cf"),n("1da1")),p=n("5502"),g=n("fd3a"),m=n("8c86");function b(e){Object(m["a"])(1,arguments);var t=Object(g["a"])(e);return t.setDate(1),t.setHours(0,0,0,0),t}var f=n("28f3"),v=n("6e57"),h=n("310c"),O=n("67d4"),j=n("b3fd"),w=Object(a["defineComponent"])({components:{SvgWrapper:O["a"]},setup:function(){var e=Object(a["inject"])("tecton"),t=Object(a["inject"])("app-start-time"),n=e.sources,r=n.loc,c=n.requestPlatformData,o=Object(p["b"])(),i=Object(a["ref"])(!0),s=j["a"].getCapabilities(e),d=s.isPfmEnrolled;Object(a["onBeforeMount"])((function(){var t;o.dispatch(v["a"].getConfig,null===(t=e.sources)||void 0===t?void 0:t.getFeatureConfig)})),Object(a["watch"])(d,function(){var n=Object(l["a"])(regeneratorRuntime.mark((function n(a){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a){n.next=3;break}return i.value=!1,n.abrupt("return");case 3:return i.value=!0,n.next=6,V();case 6:i.value=!1,r=performance.now()-t,Object(f["m"])(e,r,"_SpendingWidget");case 9:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),{immediate:!0});var u=300,g=24,m=19,O=function(){var e=u-(g+m);return e/2}(),w=30,y=O-w,k=y/O,D=O/(u/2)*100,S="".concat((k*D).toFixed(2),"%"),C="".concat(D.toFixed(2),"%"),P="empty-state-spending-widget",x=Object(a["computed"])((function(){var e,t,n,a=(null===o||void 0===o||null===(e=o.state)||void 0===e||null===(t=e.config)||void 0===t||null===(n=t.q2Config)||void 0===n?void 0:n.fiName)||"";return r("_t.contentBlock.spendingWidget.emptyStateMessage",{fiName:a})})),E=r("_t.contentBlock.spendingWidget.enrollmentCTA"),R=Object(a["computed"])((function(){return o.state.accounts.widgetData.Spending_Widget})),_=Object(a["computed"])((function(){var e,t;return null===(e=R.value)||void 0===e||null===(t=e.date_range_category_totals)||void 0===t?void 0:t.map((function(e){var t,n,a;return{value:e.total,name:(null===(t=h["d"][e.category_guid])||void 0===t?void 0:t.name)||r("_t.account.spendingWidget.chart.transactions.other"),id:e.category_guid||"CAT-other",icon:(null===(n=h["d"][e.category_guid])||void 0===n?void 0:n.icon)||"piechart",color:(null===(a=h["d"][e.category_guid])||void 0===a?void 0:a.color)||"var(--t-gray-7)"}}))})),W=function(){var e=new Date;return Object(f["f"])(b(e),e)}();function I(){return B.apply(this,arguments)}function B(){return B=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.actions.showOverpanel("pfm/widgets",{overpanelId:"Spending"});case 2:V();case 3:case"end":return t.stop()}}),t)}))),B.apply(this,arguments)}function M(){return e.actions.clearCache("/accounts","/members")}function N(){var t;null===(t=e.sources)||void 0===t||t.canUser("isPfmEnrolled").then((function(e){d.value=e}))}function F(){return T.apply(this,arguments)}function T(){return T=Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.actions.showOverpanel("pfm/enrollment",{overpanelId:e.sources.loc("_t.manage.accounts")}).then((function(){M(),N()}));case 1:case"end":return t.stop()}}),t)}))),T.apply(this,arguments)}function V(){return q.apply(this,arguments)}function q(){return q=Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.dispatch(v["a"].getPfmWidgetData,{requestPlatformData:c,widgetName:"Spending_Widget"});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.warn("ERROR loading Spending Content Block",JSON.stringify(e.t0));case 8:case"end":return e.stop()}}),e,null,[[0,5]])}))),q.apply(this,arguments)}return{isFetching:i,chartData:_,monthToDateLabel:W,loc:r,openMxWidget:I,isPfmEnrolled:d,emptyStateImgSrc:P,emptyStateMessage:x,enrollmentCTA:E,enrollInPFM:F,donutOuterRadiusPct:C,donutInnerRadiusPct:S,spendingWidgetData:R}}});n("cd44");w.render=u,w.__scopeId="data-v-c24a558a";t["default"]=w},b3fd:function(e,t,n){"use strict";n("96cf");var a=n("1da1"),r=n("7a23");t["a"]={composableDashboardEnabled:Object(r["ref"])(!1),isPfmEnrolled:Object(r["ref"])(!1),getCapabilities:function(e){this.getComposableDashboardEnabled(e),this.getIsPfmEnrolled(e);var t=this.composableDashboardEnabled,n=this.isPfmEnrolled;return{composableDashboardEnabled:t,isPfmEnrolled:n}},getComposableDashboardEnabled:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.sources.canUser("composableDashboardEnabled");case 2:t.composableDashboardEnabled.value=n.sent;case 3:case"end":return n.stop()}}),n)})))()},getIsPfmEnrolled:function(e){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.sources.canUser("isPfmEnrolled");case 2:t.isPfmEnrolled.value=n.sent;case 3:case"end":return n.stop()}}),n)})))()}}},cd44:function(e,t,n){"use strict";n("7d74")}}]);
//# sourceMappingURL=spending-content-block.ee2aa320.js.map